/**      
* This is Adam Haris's fork
*
* Stylish Select 0.4.4 - jQuery plugin to replace a select drop down box with a stylable unordered list
* http://github.com/sko77sun/Stylish-Select
* 
* Requires: jQuery 1.3 or newer
* 
* Contributions from Justin Beasley: http://www.harvest.org/ Anatoly Ressin: http://www.artazor.lv/ Wilfred Hughes: https://github.com/Wilfred
* 
* Dual licensed under the MIT and GPL licenses.
*/
(function(a){a("html").addClass("stylish-select");if(!Array.prototype.indexOf)Array.prototype.indexOf=function(a){if(this===void 0||this===null)throw new TypeError;var p=Object(this),m=p.length>>>0;if(m===0)return-1;var c=0;arguments.length>0&&(c=Number(arguments[1]),c!==c?c=0:c!==0&&c!==1/0&&c!==-(1/0)&&(c=(c>0||-1)*Math.floor(Math.abs(c))));if(c>=m)return-1;for(c=c>=0?c:Math.max(m-Math.abs(c),0);c<m;c++)if(c in p&&p[c]===a)return c;return-1};a.fn.extend({getSetSSValue:function(o){return o?(a(this).val(o).change(),
this):a(this).find(":selected").val()},resetSS:function(){var o=a(this).data("ssOpts");$this=a(this);$this.next().remove();$this.unbind(".sSelect").sSelect(o)}});a.fn.sSelect=function(o){return this.each(function(){function p(){var b=e.offset().top,d=a(window).height(),c=a(window).scrollTop();g>parseInt(i.ddMaxHeight)&&(g=parseInt(i.ddMaxHeight));g==0&&(g=parseInt(i.ddMaxHeight));b-=c;b+g>=d?(j.css({height:g}),k.css({top:"-"+g+"px",height:g}),f.onTop=!0):(j.css({height:g}),k.css({top:u+"px",height:g}),
f.onTop=!1)}function m(b,a){b==!0&&(q=d,f.change());a==!0&&(d=q,n(d));k.hide();e.css({position:"static"})}function c(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=RegExp("[\\?&]"+a+"=([^&#]*)").exec(window.location.href);return a==null?"":decodeURIComponent(a[1].replace(/\+/g," "))}function n(a,d){if(a==-1)l.text(i.defaultText),h.removeClass("hiLite");else{h.removeClass("hiLite").eq(a).addClass("hiLite");var c=h.eq(a).text(),e=h.eq(a).parent().data("key");try{f.val(e)}catch(g){f[0].selectedIndex=
a}l.text(c);d==!0&&(q=a,f.change());k.is(":visible")&&h.eq(a).focus()}}function v(b){a(b).unbind("keydown.sSelect").bind("keydown.sSelect",function(a){a=a.which;s=!0;switch(a){case 40:case 39:return d<w-1&&(++d,n(d)),!1;case 38:case 37:return d>0&&(--d,n(d)),!1;case 33:case 36:return d=0,n(d),!1;case 34:case 35:return d=w-1,n(d),!1;case 13:case 27:return m(!0),!1}keyPressed=String.fromCharCode(a).toLowerCase();if(typeof r.indexOf(keyPressed)!="undefined"){++d;d=r.indexOf(keyPressed,d);if(d==-1||d==
null||x!=keyPressed)d=r.indexOf(keyPressed);n(d);x=keyPressed;return!1}})}var i=a.extend({defaultText:"v\u00e1lasszon",animationSpeed:0,ddMaxHeight:"",containerClass:"",paramName:""},o),f=a(this),l=a('<div class="selectedTxt"></div>'),e=a('<div class="newListSelected '+i.containerClass+'"></div>'),k=a('<div class="SSContainerDivWrapper" style="visibility:hidden;"></div>'),j=a('<ul class="newList"></ul>'),y=-1,d=-1,q=-1,r=[],x=!1,s=!1,h;a(this).data("ssOpts",o);e.insertAfter(f);e.attr("tabindex",f.attr("tabindex")||
"0");l.prependTo(e);j.appendTo(e);j.wrap(k);k=j.parent();f.hide();l.data("ssReRender",!l.is(":visible"));f.children("optgroup").length==0?(f.children().each(function(b){var c=a(this).html(),e=a(this).val();r.push(c.charAt(0).toLowerCase());if(a(this).attr("selected")=="selected")i.defaultText=c,d=q=b;j.append(a('<li><a href="JavaScript:void(0);">'+c+"</a></li>").data("key",e))}),h=j.children().children()):(f.children("optgroup").each(function(){var b=a(this).attr("label"),b=a('<li class="newListOptionTitle">'+
b+"</li>"),c=a("<ul></ul>");b.appendTo(j);c.appendTo(b);a(this).children().each(function(){++y;var b=a(this).html(),e=a(this).val();r.push(b.charAt(0).toLowerCase());if(a(this).attr("selected")=="selected")i.defaultText=b,d=q=y;c.append(a('<li><a href="JavaScript:void(0);">'+b+"</a></li>").data("key",e))})}),h=j.find("ul li a"));var g=j.height(),u=e.height(),w=h.length;if(d!=-1)n(d);else if(i.paramName){var t=c(i.paramName);t!=""?(t=a("#"+a(this).attr("id")+" option[value='"+t+"']").text(),l.text(t)):
l.text(i.defaultText)}else l.text(i.defaultText);p();a(window).bind("resize.sSelect scroll.sSelect",p);l.bind("click.sSelect",function(b){b.stopPropagation();a(this).data("ssReRender")&&(g=j.height("").height(),k.height(""),u=e.height(),a(this).data("ssReRender",!1),p());a(".SSContainerDivWrapper").not(a(this).next()).hide().parent().css("position","static").removeClass("newListSelFocus");k.toggle();e.css("position","relative");h.eq(d).focus()});h.bind("click.sSelect",function(b){b=a(b.target);d=
h.index(b);s=!0;n(d,!0);m()});h.bind("mouseenter.sSelect",function(b){a(b.target).addClass("newListHover")}).bind("mouseleave.sSelect",function(b){a(b.target).removeClass("newListHover")});f.bind("change.sSelect",function(b){b=a(b.target);if(s==!0)return s=!1;var c=b.find(":selected");d=b.find("option").index(c);n(d)});e.bind("click.sSelect",function(a){a.stopPropagation();v(this)});e.bind("focus.sSelect",function(){a(this).addClass("newListSelFocus");v(this)});e.bind("blur.sSelect",function(){a(this).removeClass("newListSelFocus")});
a(document).bind("click.sSelect",function(){e.removeClass("newListSelFocus");k.is(":visible")?m(!1,!0):m(!1)});l.bind("mouseenter.sSelect",function(b){a(b.target).parent().addClass("newListSelHover")}).bind("mouseleave.sSelect",function(b){a(b.target).parent().removeClass("newListSelHover")});k.css({left:"0",display:"none",visibility:"visible"})})}})(jQuery);